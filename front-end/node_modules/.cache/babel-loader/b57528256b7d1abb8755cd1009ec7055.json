{"ast":null,"code":"var _jsxFileName = \"/Users/jeraldielquinones/Desktop/react-jobly/front-end/src/components/BookList.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport JoblyApi from '../api/api';\nconst API = 'https://example-data.draftbit.com/books?_limit=240';\nconst BookList = () => {\n  const [books, setBooks] = useState([]);\n  const [userFavorites, setUserFavorites] = useState([]);\n  useEffect(() => {\n    axios.get(API).then(res => {\n      setBooks(res.data);\n    }).catch(err => console.log(err));\n\n    // Fetch user favorites when the component mounts\n    if (JoblyApi.token) {\n      const username = JoblyApi.getCurrentUser().username;\n      JoblyApi.getUserFavorites(username).then(favorites => {\n        setUserFavorites(favorites.map(favorite => favorite.book_id));\n      }).catch(err => console.error('Error fetching favorites:', err));\n    }\n  }, []);\n  const addToFavorites = async bookId => {\n    try {\n      const username = JoblyApi.getCurrentUser().username;\n      const book = books.find(book => book.id === bookId);\n      await JoblyApi.addToFavorites({\n        user_id: username,\n        book_id: book.id,\n        title: book.title,\n        image_url: book.image_url,\n        description: book.description,\n        authors: book.authors,\n        genres: book.genres\n      });\n      setUserFavorites([...userFavorites, bookId]);\n    } catch (err) {\n      console.error('Error adding to favorites:', err);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"book-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }, books.map(book => /*#__PURE__*/React.createElement(Link, {\n    key: book.id,\n    to: `/book/${book.id}`,\n    className: \"book-entry-link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    key: book.id,\n    className: \"book-entry\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 15\n    }\n  }, book.title)), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: book.image_url,\n    alt: \"#\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 15\n    }\n  }), userFavorites.includes(book.id) ? /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, \" \\u2605 Favorite\") : /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => addToFavorites(book.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }\n  }, \"Add to Favorites\"))))));\n};\nexport default BookList;","map":{"version":3,"names":["React","useState","useEffect","axios","Link","JoblyApi","API","BookList","books","setBooks","userFavorites","setUserFavorites","get","then","res","data","catch","err","console","log","token","username","getCurrentUser","getUserFavorites","favorites","map","favorite","book_id","error","addToFavorites","bookId","book","find","id","user_id","title","image_url","description","authors","genres","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","key","to","src","alt","includes","style","color","onClick"],"sources":["/Users/jeraldielquinones/Desktop/react-jobly/front-end/src/components/BookList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport JoblyApi from '../api/api';\n\nconst API = 'https://example-data.draftbit.com/books?_limit=240';\n\nconst BookList = () => {\n  const [books, setBooks] = useState([]);\n  const [userFavorites, setUserFavorites] = useState([]);\n\n  useEffect(() => {\n    axios\n      .get(API)\n      .then((res) => {\n        setBooks(res.data);\n      })\n      .catch((err) => console.log(err));\n\n    // Fetch user favorites when the component mounts\n    if (JoblyApi.token) {\n      const username = JoblyApi.getCurrentUser().username;\n      JoblyApi.getUserFavorites(username)\n        .then((favorites) => {\n          setUserFavorites(favorites.map(favorite => favorite.book_id));\n        })\n        .catch((err) => console.error('Error fetching favorites:', err));\n    }\n  }, []);\n\n  const addToFavorites = async (bookId) => {\n    try {\n      const username = JoblyApi.getCurrentUser().username;\n      const book = books.find(book => book.id === bookId);\n\n      await JoblyApi.addToFavorites({\n        user_id: username,\n        book_id: book.id,\n        title: book.title,\n        image_url: book.image_url,\n        description: book.description,\n        authors: book.authors,\n        genres: book.genres,\n      });\n\n      setUserFavorites([...userFavorites, bookId]);\n    } catch (err) {\n      console.error('Error adding to favorites:', err);\n    }\n  };\n\n  return (\n    <div className='book-list'>\n      {books.map((book) => (\n        <Link key={book.id} to={`/book/${book.id}`} className='book-entry-link'>\n          <div key={book.id} className='book-entry'>\n            <div>\n              <h2>{book.title}</h2>\n            </div>\n            <div>\n              <img src={book.image_url} alt='#' />          \n              {userFavorites.includes(book.id) ? (\n                <span style={{ color: 'red' }}> â˜… Favorite</span>\n              ) : (\n                <button onClick={() => addToFavorites(book.id)}>Add to Favorites</button>\n              )}\n            </div>\n          </div>\n        </Link>\n      ))}\n    </div>\n  );\n};\n\nexport default BookList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}